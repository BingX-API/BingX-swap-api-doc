Official API Documentation for the Bingbon Trading Platform
==================================================
Bingbon Developer Documentation ([English Docs][])

<!-- TOC -->

- [Introduction](#Introduction)
- [Authentication](#Authentication)
    - [Generate an API Key](#Generate an api-key)
    - [Make Requests](#Make Requests)
    - [Signature](#Signature)
    - [Requests](#Requests)
- [Basic Information](#Basic Information)
    - [Common Error Codes](#Common Error Codes)
    - [Timestamp](#Timestamp)
    - [Numbers](#Numbers)
    - [Rate Limits](#Rate Limits)
        - [REST API](#rest-api)
    - [Get Server Time](#Get Server Time)
- [Market Interface](#Market Interface)
    - [Contract Information](#Contract Information)
    - [Get Latest Price of a Trading Pair](#Get Latest Price of a Trading Pair)
    - [Get Market Depth](#Get Market Depth)
    - [The latest Trade of a Trading Pair](#The latest Trade of a Trading Pair)
    - [Current Funding Rate](#Current Funding Rate)
    - [Funding Rate History](#Funding Rate History)
    - [Get K-Line Data](#Get K-Line Data)
    - [K-Line Data History](#K-Line Data History)
    - [Get Swap Open Positions](#Get Swap Open Positions)
- [Account Interface](#Account Interface)
    - [Get Perpetual Swap Account Asset Information](#Get Perpetual Swap Account Asset Information)
    - [Perpetual Swap Positions](#Perpetual Swap Positions)
- [Trade Interface](#Trade Interface)
    - [Place a New Order](#Place a New Order)
    - [One-Click Close Position](#One-Click Close Position)
    - [One-Click Close All Positions](#One-Click Close All Positions)
    - [Cancel an Order](#Cancel an Order)
    - [Cancel a Batch of Orders](#Cancel a Batch of Orders)
    - [Cancel All Orders](#Cancel All Orders )
    - [Unfilled Order Acquisition](#Unfilled Order Acquisition)
    - [Get Order Details](#Get Order Details) 
    - [Switch Margin Mode](#Switch Margin Mode) 
    - [Switch Leverage](#Switch Leverage)

<!-- /TOC -->

# Introduction

Welcome to the [Bingbon][] API. You can use our API to access market data, trading, and account management endpoints of Perpetual Swap. The market data API is publicly accessible and provides market data such as The Latest Trade of a Trading Pair. The account and trading APIs require authentication with an API Key which allows you to place and cancel orders and enquire order status and account info.


# **Authentication**
## Generate an API Key

Before being able to sign any requests, you must create an API Key at the API Management page on Bingbon. Upon creating a key you will have 2 pieces of information which you should remember:
* API Key
* Secret Key


The API Key and Secret Key will be randomly generated and provided by Bingbon.

## Make Requests

All private REST requests must contain the following parameters:
* API Key -  as a string
* Sign - a signature computed based on HMAC SHA256 (see Signature subsection for details).
* Timestamp - the timestamp of your request.
* Request bodies are expected to have content type application/json and are in valid JSON format.

## Signature
A “sign” is generated by encrypting the http method, url path, request parameters, etc. concatenated by string based on HMAC SHA256.

* ”Path“ is the request path of URL, e.g. /api/v1/user/getBalance.
* The request "method" should be UPPER CASE, i.e. GET, POST, PUT and DELETE.
* All “parameters” (including timestamp) are sorted lexicographically as a specific string *key1=value1 + key2=value2 ... + Secret Key*. (“+” means connection between 2 strings)

originString = method + path + params 

sign = HmacSHA256 (originString)

**Example: “Sign” the following request**

```bash
curl "https://api-swap-rest.bingbon.pro/api/v1/user/getBalance"
      
```
* “getBalance” refers to Get user's Perpetual Swap Account Asset Information in terms of "POST" requests. Take apiKey=Zsm4DcrHBTewmVaElrdwA67PmivPv6VDK6JAkiECZ9QfcUnmn67qjCOgvRuZVOzU, secretKey=UuGuyEGt6ZEkpUObCYCmIfh0elYsZVh80jlYwpJuRZEw70t6vomMH7Sjmf94ztSI as an example.
```
timestamp = 1616488398013
apiKey = Zsm4DcrHBTewmVaElrdwA67PmivPv6VDK6JAkiECZ9QfcUnmn67qjCOgvRuZVOzU
currency = USDT
```

The parameters are as follows based on lexicographical sorting.
```
apiKey = Zsm4DcrHBTewmVaElrdwA67PmivPv6VDK6JAkiECZ9QfcUnmn67qjCOgvRuZVOzU
currency = USDT
timestamp = 1616488398013
```

The request method is "POST"; the path is /api/v1/user/getBalance; accordingly a string to be signed is generated as

```
paramString = 'apiKey=Zsm4DcrHBTewmVaElrdwA67PmivPv6VDK6JAkiECZ9QfcUnmn67qjCOgvRuZVOzU&currency=USDT&timestamp=1616488398013'
  
```

Further generate the string to be signed by algorithm as

```
originString = 'POST/api/v1/user/getBalanceapiKey=Zsm4DcrHBTewmVaElrdwA67PmivPv6VDK6JAkiECZ9QfcUnmn67qjCOgvRuZVOzU&currency=USDT&timestamp=1616488398013'
```

Then, add the Secret Key to the string above to generate the final string.


E.g:
```
Signature = HmacSHA256(secretkey, originString)
i.e.
Signature = HmacSHA256("UuGuyEGt6ZEkpUObCYCmIfh0elYsZVh80jlYwpJuRZEw70t6vomMH7Sjmf94ztSI", "POST/api/v1/user/getBalanceapiKey=Zsm4DcrHBTewmVaElrdwA67PmivPv6VDK6JAkiECZ9QfcUnmn67qjCOgvRuZVOzU&currency=USDT&timestamp=1616488398013")

```
The result of the “Sign” is S7Ok3L5ROXSbYfXj9ryeBbKfRosh9tmH%2FAKiwj7eAoc%3D; the url query parameter should be as follows.
```
apiKey = Zsm4DcrHBTewmVaElrdwA67PmivPv6VDK6JAkiECZ9QfcUnmn67qjCOgvRuZVOzU
currency = USDT
timestamp = 1616488398013
sign = S7Ok3L5ROXSbYfXj9ryeBbKfRosh9tmH%2FAKiwj7eAoc%3D

The final API request sent to the server should be:
"https://api-swap-rest.bingbon.pro/api/v1/user/getBalance?apiKey=Zsm4DcrHBTewmVaElrdwA67PmivPv6VDK6JAkiECZ9QfcUnmn67qjCOgvRuZVOzU&currency=USDT&timestamp=1616488398013&sign=S7Ok3L5ROXSbYfXj9ryeBbKfRosh9tmH%2FAKiwj7eAoc%3D"

echo -n "POST/api/v1/user/getBalanceapiKey=Zsm4DcrHBTewmVaElrdwA67PmivPv6VDK6JAkiECZ9QfcUnmn67qjCOgvRuZVOzU&currency=USDT&timestamp=1616488398013" | openssl dgst -sha256 -hmac "UuGuyEGt6ZEkpUObCYCmIfh0elYsZVh80jlYwpJuRZEw70t6vomMH7Sjmf94ztSI" -binary | base64 | xargs python2.7 -c 'import sys, urllib;print(urllib.quote(sys.argv[1]))'

```

## Requests

Root URL for REST access：`https://api-swap-rest.bingbon.pro` 

All requests are HTTPS-based. The Content-Type in the request header should be set as “application/json”.

**Request Description**

1、Request Parameters: Encapsulate the request parameters according to the parameter requirements of the specific endpoint request.

2、Submit Request Parameters: Submit the encapsulated request parameters to the server via POST/GET/DELETE, etc.

3、Server Response: The server first performs parameter security verification on the user request data. When the verification is completed, the response data will be returned to the user in JSON format according to the service logic.

4、Data Processing: Process the response data from the server.

**Success**

A successful response is indicated by HTTP status code 200 and may optionally contain a body. If the response has a body, it will be included under each resource below.

# **Basic Information**

## Common Error Codes

**Common HTTP Error Codes**

###Types

* 4XX error codes are used to indicate wrong request content, behavior, format.
* 5XX error codes are used to indicate problems with the Bingbon service.

###Error Codes

* 400 Bad Request – Invalid request format 
* 401 Unauthorized – Invalid API Key 
* 403 Forbidden – You do not have access to the requested resource
* 404 Not Found 
* 429 Too Many Requests - Return code is used when breaking a request rate limit.
* 418 return code is used when an IP has been auto-banned for continuing to send requests after receiving 429 codes.
* 500 Internal Server Error – We had a problem with our server
* 504 return code means that the API server has submitted a request to the service center but failed to get a response. It should be noted that the 504 return code does not mean that the request failed. It refers to an unknown status. The request may have been executed, or it may have failed. Further confirmation is required.

###Notes:

* If it fails, there will be an error description included in the response body.
* Errors may be thrown from every interface.

## Timestamp

Unless otherwise specified, all timestamps from the API are returned with microseconds resolution.

Requests that have a 30+ second difference between the timestamp and the API service time will be considered expired or rejected. We recommend using the time endpoint to query for the API server time if you believe there may be time skew between your server and the API servers.

### Example

1587091154123

## Numbers

Decimal numbers are returned as "Strings" in order to preserve full precision. It is recommended that the numbers are converted to "Strings" to avoid truncation and precision loss.

Integer numbers (such as trade ID and sequences) are unquoted.

## Rate Limits

To prevent abuse, Bingbon imposes rate limits on incoming requests. When a rate limit is exceeded, the system will automatically limit the requests.

### REST API

* Market Interface is the public interface. The rate limit of public interfaces is 10 requests every 1 second at most for each IP.
* Account Interface and Transaction Interface are private interfaces. Generally, the private interface rate limit is at most 10 requests every 1 second for each UID.
* The specific rate limits are indicated in the documentation for some endpoints.

## Get Server Time

**HTTP Requests**

  ```http
        # Request
        POST api/v1/common/server/time
  ```

**Request Method**

    GET / POST

**Request Parameters**

    null   

**Return Parameters**

| Field       | Type   | Description                                                  |
| ----------- | ------ | ------------------------------------------------------------ |
| code        | Int64  | error code, 0 means successfully response, others means response failure |
| msg         | String | Error Details Description                                    |
| currentTime | Int64  | The current time of the system，unit: ms                     |

```javascript
# Response
    {
        "code": 0,
        "msg": "",
        "currentTime": 1534431933321
    }
```
# Market Interface

## 1. Contract Information

**HTTP Requests**

```http
    # Request
    GET api/v1/market/getAllContracts
    
    example： https://api-swap-rest.bingbon.pro/api/v1/market/getAllContracts   
```
**Return Parameters**  


| Field | Description |
| ---------- |:-------:|
| code       | For error messages, 0 means normal |
| msg        | Error message description |
| contractId | ContractId |
| symbol     | Trading pair symbol, returned in the form of A_B |
| name       | The name of the underlying index |
| size       | Contract value, for example 0.0001 BTC |
| volumePrecision  | The precision of trading volume  |
| pricePrecision   | The precision of price |
| feeRate          | Trading fees |
| tradeMinLimit       | Minimum trading unit |
| currency   | Settlement currency |
| asset      | Contract denomination asset |

```javascript
	# Response
	{
	    "code": 0,
	    "msg": "",
	    "data": [{
	        "contractId": "100",
	        "symbol": "BTC-USDT",
	        "name": "BTC-USDT",
	        "size": "0.0001",
	        "volumePrecision": 0,
	        "pricePrecision": 2,
	        "feeRate": 0.001,
	        "tradeMinLimit": 1,
	        "currency": "USDT",
	        "asset": "BTC"
	    }, {
	        "contractId": "101",
	        "symbol": "ETH_USDT",
	        "name": "ETH-USDT",
	        "size": "0.01",
	        "volumePrecision": 0,
	        "pricePrecision": 2,
	        "feeRate": 0.001,
	        "tradeMinLimit": 1,
	        "currency": "USDT",
	        "asset": "ETH"
	    }],
	    ...
	} 
```
## 2. Get Latest Price of a Trading Pair

**HTTP Requests**

  ```http
    # Request
    GET api/v1/market/getLatestPrice
  ```

**Request Parameters** 

| Parameters | Type   | Required | Field Description   | Description                                                  |
| ---------- | ------ | -------- | ------------------- | ------------------------------------------------------------ |
| symbol     | String | YES      | Trading pair symbol | There must be a hyphen/ "-" in the trading pair symbol. eg: BTC-USDT |

**Return Parameters**

| Parameters | Type    | Description   |
| ---------- | ------- | ------------- |
| tradePrice | float64 | Trading Price |
| indexPrice | float64 | Index Price   |
| fairPrice  | float64 | Mark Price    |

```javascript
# Response
    {
        "code": 0,
        "msg": "",
        "data": {
          "tradePrice": "50000.18",
          "indexPrice": "50000.18",
          "fairPrice": "50000.18"
        }
    }
```

## 3. Get Market Depth

**HTTP Requests**

```http
    # Request
    GET api/v1/market/getMarketDepth
```

**Request Parameters**


| Parameters | Type  | Required | Field Description | Description |
| ------------- |----|----|----| ------------- |
| symbol | String | YES | Trading pair symbol | There must be a hyphen/ "-" in the trading pair symbol. eg: BTC-USDT |
| level | String | NO | Number of levels | If it is empty, it will return 5 levels of data by default. |

**Return Parameters**  

| Parameters | Type    | Description                                       |
| ---------- | ------- | ------------------------------------------------- |
| code       | Int64   | For error messages, 0 means normal, 1 means error |
| msg        | String  | Error message description                         |
| asks       | array   | Sell side depth                                   |
| bids       | array   | Buy side depth                                    |
| p          | float64 | price                                             |
| v          | float64 | volume                                            |


```javascript
    # Response
    {
        "code": 0,
        "msg": "",
        "data": {
            "asks": [
              {
                "p": 5319.94,
                "v": 0.05483456
              },{
                "p": 5320.19,
                "v": 1.05734545
              },{
                "p": 5320.39,
                "v": 1.16307999
              },{
                "p": 5320.94,
                "v": 0.05483456
              },{
                "p": 5330.19,
                "v": 1.05734545
              },{
                "p": 5330.39,
                "v": 1.16307999
              },
            ],
            "bids": [
              {
                "p": 5319.93,
                "v": 0.05483456
              },{
                "p": 5318.19,
                "v": 1.05734545
              },{
                "p": 5317.39,
                "v": 1.16307999
              },{
                "p": 5316.94,
                "v": 0.05483456
              },{
                "p": 5315.19,
                "v": 1.05734545
              },{
                "p": 5314.39,
                "v": 1.16307999
              },
            ],
        }
    }
```
## 4. The latest Trade of a Trading Pair

**HTTP Requests**

  ```http
    # Request
    GET api/v1/market/getMarketTrades
  ```

**Request Parameters** 

| Parameters | Type | Required | Field Description | Description |
| -------|--------|--- |-------|------|
| symbol | String | YES |Trading pair symbol| There must be a hyphen/ "-" in the trading pair symbol. eg: BTC-USDT |

**Return Parameters**

| Parameters | Type   | Description            |
| ---------- | ------ | ---------------------- |
| time       | data   | Closing Time           |
| makerSide  | String | Direction (Buy / Sell) |
| price      | String | Closing Price          |
| volume     | String | Filled Amount          |

   ```javascript
    # Response
    {
        "code": 0,
        "msg": "",
        "data": {
            "trades": [
                {
                    "time": "2018-04-25T15:00:51.999Z",
                    "makerSide": "Buy",
                    "price": 0.279563,
                    "volume": 100,
                },
                {
                    "time": "2018-04-25T15:00:51.000Z",
                    "makerSide": "Sell",
                    "price": 0.279563,
                    "volume": 300,
                }
            ]
        }
    }
   ```

## 5. Current Funding Rate

**HTTP Requests**

```http
	# Request
	GET api/v1/market/getLatestFunding
```

**Request Parameters**

| Parameters | Type   | Required | Field Description   | Description                                                  |
| ---------- | ------ | -------- | ------------------- | ------------------------------------------------------------ |
| symbol     | String | YES      | Trading pair symbol | There must be a hyphen/ "-" in the trading pair symbol. eg: BTC-USDT |

**Return Parameters** 

| Parameters  | Type    | Description                                   |
| ----------- | ------- | --------------------------------------------- |
| fundingRate | float64 | Current Funding Rate                          |
| fairPrice   | float64 | Current Mark Price                            |
| leftSeconds | float64 | Time left for the next settlement, in seconds |

```javascript
# Response
    {
        "code": 0,
        "msg": "",
        "data": {
          "fundingRate": "0.3000",
          "fairPrice": "182.90",
          "leftSeconds": "1024",
        }
    }
```

## 6. Funding Rate History 

**HTTP Requests**

  ```http
    # Request
    GET api/v1/market/getHistoryFunding
  ```

**Request Parameters**  

| Parameters | Type | Required | Field Description | Description |
| -------|--------|--- |-------|------|
| symbol | String | YES |Trading pair symbol| There must be a hyphen/ "-" in the trading pair symbol. eg: BTC-USDT |

**Return Parameters** 

| Parameters  | Type   | Description                                   |
| ----------- | ------ | --------------------------------------------- |
| historyId   | String | historyId                                     |
| fundingRate | String | Funding rate                                  |
| fairPrice   | String | Mark Price                                    |
| interval    | String | The funding rate settlement cycle, unit: hour |
| time        | data   | Settlement Time                               |

   ```javascript
    # Response
    {
        "code": 0,
        "msg": "",
        "data": {
            "fundings": [
                {
                    "historyId": "687",
                    "symbol": "ETH-USDT",
                    "fundingRate": "0.3000",
                    "fairPrice": "182.73",
                    "interval": "8",
                    "time": "2019-10-28T16:00:00.000Z"
                },
                {
                    "historyId": "686",
                    "symbol": "ETH-USDT",
                    "fundingRate": "0.3000",
                    "fairPrice": "182.90",
                    "interval": "8",
                    "time": "2019-10-28T15:00:00.000Z"
                }
            ]
        }
    } 
   ```

## 7. Get K-Line Data

    Get the latest Kline Data

**HTTP Requests**

  ```http
    # Request
    GET api/v1/market/getLatestKline
  ```

**Request Parameters**  

| Parameters | Type | Required | Field Description | Description |
| -------|--------|--- |-------|------|
| symbol | String | YES |Trading pair symbol| There must be a hyphen/ "-" in the trading pair symbol. eg: BTC-USDT |
| klineType | String | YES |K-Line Type| The type of K-Line (minutes, hours, weeks etc.) |

**Remarks**

| klineType | Field description |
| ----------|----|
| 1	        | 1min Kline |
| 3         | 3min Kline |
| 5         | 5min Kline |
| 15        | 15min Kline |
| 30        | 30min Kline |
| 60        | 1h Kline |
| 120       | 2h Kline |
| 240       | 4h Kline |
| 360       | 6h Kline |
| 720       | 12h Kline |
| 1D        | 1D Kline |
| 1W        | 1W Kline |
| 1M        | 1M Kline |

**Return Parameters** 

| **Parameters** | Type    | Description                       |
| -------------- | ------- | --------------------------------- |
| open           | float64 | Open                              |
| close          | float64 | Close                             |
| high           | float64 | High                              |
| low            | float64 | Low                               |
| volume         | float64 | Volume                            |
| ts             | int64   | The timestamp of K-Line，Unit: ms |

```javascript
# Response
    {
        "code": 0,
        "msg": "",
        "data": {
            "kline": {
                "ts": 1572253500000,
                "open": 181.41,
                "close": 181.54,
                "high": 181.54,
                "low": 181.39,
                "volume": 281
            }
        }
    }
```

## 8. K-Line Data History

    Get the K-Line history data of the trading price over a certain period of time.

**HTTP Requests**

  ```http
    # Request
    GET api/v1/market/getHistoryKlines
  ```

**Request Parameters**  

| **Parameters** | Type | Required | Field Description | Description |
| -------|--------|--- |-------|------|
| symbol | String | YES |Trading pair symbol| There must be a hyphen/ "-" in the trading pair symbol. eg: BTC-USDT |
| klineType | String | YES |K-Line Type| The type of K-Line (minutes, hours, weeks etc.) |
| startTs       | int64  | YES | Start timestamp, Unit: ms ||
| endTs       | int64  | YES | End timestamp, Unit: ms ||

**Remarks**

| klineType | Field Description |
| ----------|----|
| 1         | 1min Kline |
| 3         | 3min Kline |
| 5         | 5min Kline |
| 15        | 15min Kline |
| 30        | 30min Kline |
| 60        | 1h Kline |
| 120       | 2h Kline |
| 240       | 4h Kline |
| 360       | 6h Kline |
| 720       | 12h Kline |
| 1D        | 1D Kline |
| 1W        | 1W Kline |
| 1M        | 1M Kline |

**Return Parameters**

| **Parameters** | Type    | Description                       |
| -------------- | ------- | --------------------------------- |
| klines         | array   | K-Line data                       |
| open           | float64 | Open                              |
| close          | float64 | Close                             |
| high           | float64 | High                              |
| low            | float64 | Low                               |
| volume         | float64 | Volume                            |
| ts             | int64   | The timestamp of K-Line, Unit: ms |

```javascript
# Response
    {
        "code": 0,
        "msg": "",
        "data": {
            "klines": [
                {
                    "ts": 1572253140000,
                    "open": 181.89,
                    "close": 181.97,
                    "high": 182.04,
                    "low": 181.89,
                    "volume": 2136
                },
                {
                    "ts": 1572253200000,
                    "open": 181.94,
                    "close": 181.72,
                    "high": 181.94,
                    "low": 181.72,
                    "volume": 965
                },
                {
                    "ts": 1572253260000,
                    "open": 181.69,
                    "close": 181.72,
                    "high": 181.72,
                    "low": 181.56,
                    "volume": 1245
                },
                {
                    "ts": 1572253320000,
                    "open": 181.72,
                    "close": 181.73,
                    "high": 181.81,
                    "low": 181.69,
                    "volume": 541
                },
                {
                    "ts": 1572253380000,
                    "open": 181.77,
                    "close": 181.59,
                    "high": 181.77,
                    "low": 181.53,
                    "volume": 933
                },
                {
                    "ts": 1572253440000,
                    "open": 181.59,
                    "close": 181.38,
                    "high": 181.62,
                    "low": 181.38,
                    "volume": 1425
                },
                {
                    "ts": 1572253500000,
                    "open": 181.41,
                    "close": 181.64,
                    "high": 181.64,
                    "low": 181.39,
                    "volume": 923
                }
            ]
        }
    }
```

## 9. Get Swap Open Positions

**HTTP Requests**

```http
	# Request
    GET api/v1/market/getOpenPositions
```

**Request Parameters**

| **Parameters** | Type   | Required | Field Description   | Description                                                  |
| -------------- | ------ | -------- | ------------------- | ------------------------------------------------------------ |
| symbol         | String | YES      | Trading pair symbol | There must be a hyphen/ "-" in the trading pair symbol. eg: BTC-USDT |

**Return Parameters**

| **Parameters** | Type    | Description                                                  |
| -------------- | ------- | ------------------------------------------------------------ |
| volume         | float64 | Volume of opened positions                                   |
| unit           | string  | The unit corresponding to the Volume of opened positions, CONT. - BTC, ETH, LINK, BCH, etc. |

```javascript
# Response
    {
        "code": 0,
        "msg": "",
        "data": {
          "volume": "10.00",
          "unit": "BTC",
        }
    }
```

# Account Interface

## **1. Get Perpetual Swap Account Asset Information**

```
Get asset information of user‘s Perpetual Account
```

**HTTP Requests**

```http
	# Request
    POST api/v1/user/getBalance
```

**Request Parameters**

| **Parameters** | Type   | Required | **Field Description**                         | Description |
| -------------- | ------ | -------- | --------------------------------------------- | ----------- |
| apiKey         | String | YES      | Interface Key                                 |             |
| timestamp      | String | YES      | Timestamp of initiating the request, unit: ms |             |
| currency       | String | YES      | Account Asset                                 |             |

**Return Parameters**

| **Parameters**  | Type    | Description                                                  |
| --------------- | ------- | ------------------------------------------------------------ |
| code            | Int64   | error code, 0 means successfully response, others means response failure |
| msg             | String  | Error Details Description                                    |
| userId          | String  | User's ID                                                    |
| currency        | String  | User‘s asset                                                 |
| balance         | Float64 | Asset Balance                                                |
| equity          | Float64 | Net Asset Value                                              |
| unrealisedPNL   | Float64 | Unrealized Profit/Loss                                       |
| realisedPNL     | Float64 | realized Profit/Loss                                         |
| availableMargin | Float64 | Available Margin                                             |
| usedMargin      | Float64 | Used Margin                                                  |
| freezedMargin   | Float64 | Freezed Margin                                               |
| longLeverage    | Float64 | long Leverage                                                |
| shortLeverage   | Float64 | short Leverage                                               |

```javascript
# Response
    {
        "code": 0,
        "msg": "",
        "data": {
            "userId": "123",
            "currency": "USDT",
            "balance": 123.33,
            "equity": 128.99,
            "unrealisedPNL": 1.22,
            "realisedPNL": 8.1,
            "availableMargin": 123.33,
            "usedMargin": 2.2,
            "freezedMargin": 3.3,
            "longLeverage": 10,
            "shortLeverage": 10,
        }
    }
```

## **2. Perpetual Swap Positions**

    Retrieve information on users' positions of Perpetual Swap.

**HTTP Requests**

```http
    # Request
    POST api/v1/user/getPositions
```

**Request Method**

    POST

**Request Parameters**  

| **Parameters** | Type   | Required | Field Description                                            |
| -------------- | ------ | -------- | ------------------------------------------------------------ |
| symbol         | String | YES      | There must be a hyphen/ "-" in the trading pair symbol. eg: BTC-USDT; Return all if the field is null. |
| apiKey         | String | YES      |                                                              |
| timestamp      | String | YES      | Timestamp of initiating the request, unit: ms                |

**Return Parameters**

| **Parameters**  | Type    | Description                                                  |
| --------------- | ------- | ------------------------------------------------------------ |
| code            | Int64   | error code, 0 means successfully response, others means response failure |
| msg             | String  | Error Details Description                                    |
| symbol          | String  | Trading pair symbol                                          |
| currency        | String  | Asset Type                                                   |
| positionId      | String  | Position ID                                                  |
| positionSide    | String  | Direction Long/Short                                         |
| marginMode      | String  | margin mode Cross/Isolated                                   |
| volume          | Float64 | Volume of opened positions                                   |
| availableVolume | Float64 | Volume of positions that can be closed                       |
| unrealisedPNL   | Float64 | Unrealized Profit/Loss                                       |
| realisedPNL     | Float64 | Realized Profit/Loss                                         |
| margin          | Float64 | Margin                                                       |
| avgPrice        | Float64 | Ave. price                                                   |
| liquidatedPrice | Float64 | Estimated Liquidation Price                                  |
| leverage        | Float64 | leverage                                                     |

 ```javascript

# Response
    {
       "code": 0,
       "msg": "",
       "data": {
            "positions": [
                {
                    "symbol": "BTC-USDT",
                    "positionId": "12345678",
                    "currency": "USDT",
                    "positionSide": "Long",
                    "marginMode": "Cross",
                    "volume": 123.33,
                    "availableVolume": 128.99,
                    "unrealisedPNL": 1.22,
                    "realisedPNL": 8.1,
                    "margin": 123.33,
                    "avgPrice": 2.2,
                    "liquidatedPrice": 2.2,
                    "leverage": 10,
                },
                {
                    "symbol": "ETH-USDT",
                    "currency": "USDT",
                    "positionSide": "Short",
                    "marginMode": "Isolated",
                    "volume": 123.33,
                    "availableVolume": 128.99,
                    "unrealisedPNL": 1.22,
                    "realisedPNL": 8.1,
                    "margin": 123.33,
                    "avgPrice": 2.2,
                    "liquidatedPrice": 2.2,
                    "leverage": 10,
                },
            ]
        }
    }
 ```

# Trade Interface


## 1. Place a New Order

**HTTP Requests**

```http
    # Request
    POST api/v1/user/trade
```
**Request Method**

    POST

**Request Parameters**  

| **Parameters** | Type | Required | Description |
| ------------- |----|----|----|
| symbol | String | YES | There must be a hyphen/ "-" in the trading pair symbol. eg: BTC-USDT |
| apiKey | String | YES | Interface Key |
| timestamp | String | YES | Timestamp of initiating the request, unit: ms |
| side | String | YES | (Bid/Ask) |
| entrustPrice | float64 | YES | Price  |
| entrustVolume | float64 | YES | Volume |
| tradeType | String | YES | Market/Limit |
| action | String | YES | Open/Close  |

**Return Parameters** 

| **Parameters** | Type   | Field Description |
| -------------- | ------ | ----------------- |
| orderId        | String | Order ID          |


```javascript
# Response
    {
        "code": 0,
        "msg": "",
        "data": {
            "orderId": "11141",
        }
    }
```

## 2. One-Click Close Position

```
After querying the position information, you can close the position by one-click based on the position ID. Please note that the one-click closed position is traded at market price.
```

**HTTP Requests**

```http
	# Request
    POST api/v1/user/oneClickClosePosition
```

**Request Method**

    POST

**Request Parameters**

| **Parameters** | Type   | Required | Description                                                  |
| -------------- | ------ | -------- | ------------------------------------------------------------ |
| symbol         | String | YES      | There must be a hyphen/ "-" in the trading pair symbol. eg: BTC-USDT |
| positionId     | Int64  | YES      | ID of the position needs to be closed with one click         |
| apiKey         | String | YES      | Interface Key                                                |
| timestamp      | String | YES      | Timestamp of initiating the request, unit: ms                |

**Return Parameters** 

| **Parameters** | Type   | Description                                                  |
| -------------- | ------ | ------------------------------------------------------------ |
| code           | Int64  | error code, 0 means successfully response, others means response failure |
| msg            | String | Error Details Description                                    |
| orderId        | String | Order ID generated by one-click close                        |

```javascript
# Response
    {
        "code": 0,
        "msg": "",
        "data": {
        }
    }
```

## 3. One-Click Close All Positions

```
Close all positions within the current account by one click. Please note that the one-click closed positions are traded at market price.
```

**HTTP Requests**

```http
	# Request
    POST api/v1/user/oneClickCloseAllPositions
```

**Request Method**

```
POST
```

**Request Parameters**

| **Parameters** | Type   | Required | Description                                                  |
| -------------- | ------ | -------- | ------------------------------------------------------------ |
| symbol         | String | YES      | There must be a hyphen/ "-" in the trading pair symbol. eg: BTC-USDT |
| apiKey         | String | YES      | Interface Key                                                |
| timestamp      | String | YES      | Timestamp of initiating the request, unit: ms                |

**Return Parameters**

| **Parameters** | Type         | Description                                                  |
| -------------- | ------------ | ------------------------------------------------------------ |
| code           | Int64        | error code, 0 means successfully response, others means response failure |
| msg            | String       | Error Details Description                                    |
| orders         | String array | Multiple Order IDs generated by one-click close all          |

```javascript
# Response
    {
        "code": 0,
        "msg": "",
        "data": {
          "orders": ["123", "456", "789"]
        }
    }
```

## 4. Cancel an Order

       Cancel an order that is currently in a unfilled state

**HTTP Requests**

```http
    # Request
    POST api/v1/user/cancelOrder
```

**Request Method**

    POST

**Request Parameters**  

| **Parameters** | Type | Required | Description |
| ------------- |----|----|----|
| orderId   | String | YES | Order ID |
| symbol    | String | YES | There must be a hyphen/ "-" in the trading pair symbol. eg: BTC-USDT |
| apiKey | String | YES | Interface Key |
| timestamp | String | YES | Timestamp of initiating the request, unit: ms                |

**Return Parameters** 

| **Parameters** | Type   | Field Description |
| -------------- | ------ | ----------------- |
| orderId        | String | Order ID          |


```javascript
# Response
    {
        "code": 0,
        "msg": "",
        "data": {
            "orderId": "11141",
        }
    }
```
## 5. Cancel a Batch of Orders

```
Cancel a batch of orders that are currently in a unfilled state
```

**HTTP Requests**

```http
	# Request
    POST api/v1/user/batchCancelOrders
```

**Request Method**

```
POST
```

**Request Parameters**  

| **Parameters** | Type   | Required | Description                                                  |
| -------------- | ------ | -------- | ------------------------------------------------------------ |
| symbol         | String | YES      | There must be a hyphen/ "-" in the trading pair symbol. eg: BTC-USDT |
| apiKey         | String | YES      | Interface Key                                                |
| timestamp      | String | YES      | Timestamp of initiating the request, unit: ms                |

**Return Parameters** 

| **Parameters** | Type   | Description                                                  |
| -------------- | ------ | ------------------------------------------------------------ |
| code           | Int64  | error code, 0 means successfully response, others means response failure |
| msg            | String | Error Details Description                                    |

```javascript
# Response
    {
        "code": 0,
        "msg": "",
        "data": {
        }
    }
```

## 6. Cancel All Orders

```
Cancel all orders that are currently in a unfilled state
```

**HTTP Requests**

```http
	# Request
    POST api/v1/user/cancelAll
```

**Request Method**

```
POST
```

**Request Parameters**  

| **Parameters** | Type   | Required | Description                                   |
| -------------- | ------ | -------- | --------------------------------------------- |
| apiKey         | String | YES      | Interface Key                                 |
| timestamp      | String | YES      | Timestamp of initiating the request, unit: ms |

**Return Parameters** 

| **Parameters** | Type   | Description                                                  |
| -------------- | ------ | ------------------------------------------------------------ |
| code           | Int64  | error code, 0 means successfully response, others means response failure |
| msg            | String | Error Details Description                                    |

```javascript
# Response
    {
        "code": 0,
        "msg": "",
        "data": {
        }
    }
```

## 7. Unfilled Order Acquisition

    Query the details of unfilled orders within the current account over a certain period of time

**HTTP Requests**

```http
    # Request
    POST api/v1/user/pendingOrders
```

**Request Method**

    POST

**Request Parameters**  

| Name | Type | Required | Field Description |
| ------------- |----|----|----|
| symbol | String | YES | There must be a hyphen/ "-" in the trading pair symbol. eg: BTC-USDT; Return all if the field is null. |
| apiKey | String | YES |  |
| timestamp | String | YES | Timestamp of initiating the request, unit: ms |

**Return Parameters** 

| **Parameters** | Type    | Description              |
| -------------- | ------- | ------------------------ |
| entrustTm      | String  | Trigger time of order    |
| side           | String  | Direction (Bid/Ask)      |
| tradeType      | String  | Order Type(Market/Limit) |
| action         | String  | Open/Close               |
| entrustPrice   | Float64 | Order Price              |
| entrustVolume  | Float64 | Order Amount             |
| avgFilledPrice | Float64 | Ave. Price               |
| filledVolume   | Float64 | Filled Amount            |
| orderId        | String  | Order ID                 |

 ```javascript

# Response
    {
       "code": 0,
       "msg": "",
       "data": {
            "orders": [
                {
                    "entrustTm": "2018-04-25T15:00:51.000Z",
                    "side": "Bid",
                    "tradeType": "Limit",
                    "action": "Open",
                    "entrustPrice": 6.021954,
                    "entrustVolume": 18.098,
                    "filledVolume": 0,
                    "avgFilledPrice": 0,
                    "orderId": "6030",
                    "symbol": "BTC-USDT",
                },
                {
                    "entrustTm": "2018-04-25T15:00:51.999Z",
                    "side": "Ask",
                    "tradeType": "Limit",
                    "action": "Close",
                    "entrustPrice": 6.021954,
                    "entrustVolume": 18.098,
                    "filledVolume": 0,
                    "avgFilledPrice": 0,
                    "orderId": "6030",
                    "symbol": "ETH-USDT",
                },
            ]
        }
    }
 ```

## 8. Get Order Details

**HTTP Requests**

   ```http
    # Request
    POST api/v1/user/queryOrderStatus
   ```
**Request Method**

    POST

**Request Parameters**  

| **Parameters** | Type | Required | Description |
| ------------- |----|----|----|
| apiKey | String | YES | Interface Key |
| timestamp | String | YES | Timestamp of initiating the request, unit: ms |
| symbol | String | YES | There must be a hyphen/ "-" in the trading pair symbol. eg: BTC-USDT |
| orderId | String | YES | Order ID |

**Return Parameters**

| **Parameters** | Type | Description |
| ------------- |----|----|
| entrustTm     | String  | Order Time |
| side          | String  | Direction (Bid/Ask) |
| tradeType     | String  | Order type (Market/Limit) |
| action        | String  | Open/Close|
| entrustPrice  | Float64 | Order Price |
| entrustVolume | Float64 | Order Amount |
| avgFilledPrice| Float64 | Ave. Price |
| filledVolume  | Float64 | Filled Amount |
| orderId       | String  | Order No. |
| status        | String  | The status of Order (Filled or PartiallyFilled, Pending, Cancelled, Failed) |

**Remarks**

| Status | Field Description |
| ----------|----|
| Pending           | Order that has not been closed |
| PartiallyFilled   | Order that has been Partially filled |
| Cancelled         | Cancelled|
| Filled            | Filled  |
| Failed            | Failed  |

```javascript
# Response
{
    "code": 0,
    "msg": "",
    "data": {
        "entrustTm": "2018-04-25T15:00:51.000Z",
        "side": "Ask",
        "tradeType": "Limit",
        "action": "Close",
        "entrustPrice": 6.021954,
        "entrustVolume": 18.098,
        "filledVolume": 0,
        "avgFilledPrice": 0,
        "orderId": "6030",
        "status": "Filled"
 	}
 }
```
## 9. Switch Margin Mode

Switch the margin mode of the Perpetual Swap Account, Cross Margin mode or Isolated Margin mode.

**HTTP Requests**

```http
	# Request
    POST api/v1/user/setMarginMode
```

**Request Method**

```
POST
```

**Request Parameters**

| **Parameters** | Type   | Required | Description                                                  |
| -------------- | ------ | -------- | ------------------------------------------------------------ |
| symbol         | String | YES      | There must be a hyphen/ "-" in the trading pair symbol. eg: BTC-USDT |
| marginMode     | String | YES      | Isolated or Cross                                            |
| apiKey         | String | YES      | Interface key                                                |
| timestamp      | String | YES      | Timestamp of initiating the request, unit: ms                |

**Return Parameters**

| **Parameters** | Type   | Description                                                  |
| -------------- | ------ | ------------------------------------------------------------ |
| code           | Int64  | error code, 0 means successfully response, others means response failure |
| msg            | String | Error Details Description                                    |

```javascript
# Response
    {
        "code": 0,
        "msg": "",
        "data": {
        }
    }
```

## 10. Switch Leverage 

    Switch the leverage size of a certain trading pair for long or short positions

**HTTP Requests**
             

```http
	# Request
  	POST api/v1/user/setLeverage
```

**Request Method**

    POST

**Request Parameters**  

| **Parameters** | Type | Required | Description |
| ------------- |----|----|---|
| symbol | String | YES | There must be a hyphen/ "-" in the trading pair symbol. eg: BTC-USDT |
| side | String | YES | Leverage of Long or Short positions |
| leverage | String | YES | Leverage Size |
| apiKey | String | YES | Interface key |
| timestamp | String | YES  | Timestamp of initiating the request, unit: ms |

    ```javascript
        # Response
            {
                "code": 0,
                "msg": "",
                "data": {
                    "userId": "123",
                    "currency": "USDT",
                    "balance": 123.33,
                    "equity": 128.99,
                    "unrealisedPNL": 1.22,
                    "realisedPNL": 8.1,
                    "availableMargin": 123.33,
                    "usedMargin": 2.2,
                    "freezedMargin": 3.3,
                    "longLeverage": 10,
                    "shortLeverage": 10,
                }
            }
    ```

**Return Parameters**

| **Parameters** | Type | Description |
| ------------- |----|----|
| code	| Int64 | error code, 0 means successfully response, others means response failure |
| msg | String | Error Details Description |

```javascript
# Response
    {
        "code": 0,
        "msg": "",
        "data": {
        }
    }
```

  **Remarks**


​    
[Bingbon]: https://bingbon.pro
[English Docs]: https://bingbon.pro
[Unix Epoch]: https://en.wikipedia.org/wiki/Unix_time
